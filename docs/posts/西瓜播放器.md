---
title: ğŸ‰è§†é¢‘æ’­æ”¾ä½ è¿˜åœ¨ç”¨video.jså—ï¼Ÿå¿«æ¥è¯•è¯•è¥¿ç“œæ’­æ”¾å™¨
description: github
date: 2021-10-27
tags:
  - å¼€æºé¡¹ç›®
---

# ğŸ‰è§†é¢‘æ’­æ”¾ä½ è¿˜åœ¨ç”¨video.jså—ï¼Ÿå¿«æ¥è¯•è¯•è¥¿ç“œæ’­æ”¾å™¨

## ğŸ¯å‰è¨€

è§†é¢‘æ’­æ”¾å¯èƒ½åœ¨æ—¥å¸¸çš„ä¸šåŠ¡åœºæ™¯ä¸­å¹¶ä¸å¤šï¼Œä½†ç»å¯¹ä¸é™Œç”Ÿï¼Œé€‰æ‹©å¥½ç”¨çš„æ’ä»¶å¾€å¾€äº‹åŠåŠŸå€ã€‚ä»Šå¤©ç¬”è€…å°†å¸¦æ¥ä¸€ä¸ªåœºæ™¯ä»‹ç»ä¸€ä¸‹ç”±**å­—èŠ‚è·³åŠ¨**å¼€æºçš„[è¥¿ç“œæ’­æ”¾å™¨(ç‚¹å®ƒ)](http://v2.h5player.bytedance.com/)ï¼ŒåŠŸèƒ½å¾ˆå¤šå¾ˆå¼ºå¤§ğŸ˜ã€‚

æœ¬æ–‡ä½¿ç”¨**Vue+Xgplayer**

æµ‹è¯•è§†é¢‘url:sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/mp4/xgplayer-demo-360p.mp4

> videoListæ•°æ®å¯ä»¥çµæ´»å¤„ç†ï¼Œ ç®€è€Œè¨€ä¹‹åªéœ€è¦ä¸€ä¸ªè§†é¢‘çš„urlå’Œä¸€ä¸ªå›¾ç‰‡çš„urlã€‚
## ğŸ¯é¢„æœŸæ•ˆæœ

è¥¿ç“œè§†é¢‘æœ‰è¿™æ ·ä¸€ä¸ªé¢„è§ˆçš„æ•ˆæœ(å¾ˆå¤šè§†é¢‘ç½‘ç«™éƒ½æœ‰)ï¼Œæˆ‘ä»¬ä»Šå¤©çš„å†…å®¹å°±æ˜¯è¿™ä¸ªæ•ˆæœ

![video.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3334c80f341a4f74b848aacf42a42cb9~tplv-k3u1fbpfcp-watermark.image?)

## ğŸ¯æœ€ç»ˆæ•ˆæœ

![video-list.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9fc667509b584c898862d79e16890782~tplv-k3u1fbpfcp-watermark.image?)

## ğŸ¯xgplayerç®€å•ä½¿ç”¨

### ğŸ«€å®‰è£…xgplayer
```js
    npm install xgplayer
```
åœ¨éœ€è¦çš„vueç»„ä»¶ä¸­å¼•å…¥å¹¶åˆå§‹åŒ–
```js

import Player from 'xgplayer'
let player = new Player({
        id:'' ,            //æ ‡ç­¾çš„idåæˆ–è€… ä½¿ç”¨ el:domå…ƒç´ 
        url: è§†é¢‘url,
        videoInit: true,
        poster: å°é¢å›¾,
        controls: false,      
        playbackRate: [0.5, 0.75, 1, 1.5, 2],
        whitelist: [
        ''
        ],
        fluid: false,
        // download: true,
        width: '100%',
        height: '200px'
    })
```
è¿™æ ·å°±èƒ½åˆ›å»ºä¸€ä¸ªå¯ä»¥åœ¨æŒ‡å®šçš„å®¹å™¨é‡Œåˆ›å»ºä¸€ä¸ªè§†é¢‘æ’­æ”¾å™¨äº†ã€‚

## ğŸ¯å®ç°æ€è·¯
åœ¨ä¸Šæ–‡çš„å®Œæ•´æ•ˆæœé‡Œè¿™ä¸ªæ¡ˆä¾‹æ˜¾ç„¶æ˜¯å¾ªç¯å‡ºæ¥çš„å¤šä¸ªå®¹å™¨ï¼Œè¿™é‡Œå°±è¦è€ƒè™‘Playerå®ä¾‹çš„é—®é¢˜äº†ï¼Œåˆ›å»ºä¸€ä¸ªè¿˜æ˜¯å¤šä¸ªï¼Œè¿™é‡Œæœ‰ä¸¤ç§æ€è·¯ï¼Œæœ¬æ–‡é‡‡ç”¨**ç¬¬ä¸€ç§**ã€‚é¡ºä¾¿ä¸€æï¼ŒçœŸå®ä¸šåŠ¡ä¸­æ•°æ®æ¥æºäºæ¥å£æœåŠ¡(å‘åœ¨è¿™)ã€‚
> 1.å¾ªç¯åˆ›å»ºå¤šä¸ªå®¹å™¨ï¼Œå¹¶ä¸ºæ¯ä¸ªåˆ›å»ºå®ä¾‹ï¼Œæ»šåŠ¨åŠ è½½ä¼šå¸¦æ¥å®ä¾‹è¿‡å¤šçš„é—®é¢˜ï¼›ä¸ºäº†é¿å…ï¼Œå¯ä»¥é‡‡ç”¨åˆ†é¡µçš„å½¢å¼ã€‚
> 
> 2.å¾ªç¯åˆ›å»ºå®¹å™¨ï¼Œä¸åˆ›å»ºå®ä¾‹ï¼Œåªå±•ç¤ºå°é¢ï¼Œç§»å…¥å®¹å™¨æ—¶é”€æ¯å‰ä¸€ä¸ªå®ä¾‹ï¼Œåˆ›å»ºå½“å‰å®ä¾‹(**æ¯”è¾ƒä¼˜è§£**)ï¼Œè¯»è€…å¯ä»¥å°è¯•ä¸€ä¸‹ã€‚

æ ¹æ®æ•ˆæœï¼Œä¸éš¾çœ‹å‡ºï¼Œç§»å…¥å®¹å™¨çš„æ—¶å€™è§†é¢‘æ’­æ”¾ï¼Œç§»å‡ºçš„æ—¶å€™å½“å‰è§†é¢‘**æš‚åœ**ï¼Œè¿™æ ·ä¿æŒåŒæ—¶åªæœ‰ä¸€ä¸ªåœ¨æ’­æ”¾ã€‚
æˆ‘è¿™é‡Œå‡†å¤‡äº†ä¸€ä¸ªimgå°é¢å±‚å’Œä¸€ä¸ªvideoè§†é¢‘å±‚ï¼Œé»˜è®¤æ˜¾ç¤ºå›¾ç‰‡å±‚ï¼Œä½¿ç”¨ä¸¤ä¸ªäº‹ä»¶mouseEnterå’ŒmouseleaveåŠ¨æ€çš„æ§åˆ¶å¯¹åº”å®¹å™¨çš„æ˜¾ç¤ºå’Œéšè—(ä¹Ÿæœ‰ä¸ªå°å‘)ï¼Œå¹¶å¯¹å¯¹åº”ç´¢å¼•çš„å®ä¾‹æ“ä½œ(æš‚åœï¼Œé”€æ¯ç­‰)ã€‚

```js
    startPlay(data,index){
        this.$refs['img'+index][0].style.display="none"
        this.$refs['video'+index][0].style.display="block"
        this.$nextTick(()=>{
            this.dom[index].play()
        })
    },

    move(data,index){
        this.$refs['img'+index][0].style.display="block"
        setTimeout(() => {
            this.dom[index].pause()    
        }, 0);
        this.$refs['video'+index][0].style.display="none"
    },
```
## ğŸ¯å®Œæ•´ä»£ç 


```js
<template>
 <div class="video">
     <div class="video-content" id="videoScroll" ref="videoScrollBar">
        <div  class="card"    v-for="(item,index) in videoList" :key="index"   >
                <div style="width:100%;height:200px" 
                    @mouseenter="startPlay(item,index)"
                    @mouseleave="move(item,index)">
                    <div                     
                        :ref="`img${index}`"
                        style="width:100%;height:200px;background-size: cover;" 
                        :style="{'background-image':`url(${item.spsltlj+'/'+item.spslt}) `}">
                    </div>
                    <div  style="display:none;overflow:hidden"   :ref="`video${index}`">
                    </div>
                 </div>
            <div class="title">
                {{item.spmc}}
            </div>
         </div>
     </div>
 </div>
</template>
 
<script>
import Player from 'xgplayer'
import { loadVideoList } from "@/api/video"
export default {
 name: 'Video',
  components: {
    TitleField: Title
  },
 data () {
    return {
        // è§†é¢‘çš„urlç”± splj+spbhç»„æˆï¼Œç¼©ç•¥å›¾posterç”±spsltlj+spsltç»„æˆ
        videoList:[
            {
                splj:'', 
                spbh:'',   
                spsltlj:'',
                spslt:''
            }
        ],
        dom:[],
    }
 },
 created() {
     this.setBaseList()
 },
 mounted() {
 },
 methods: {
   async setBaseList(){
        const res =await loadVideoList(this.form)
        this.videoList=res.data.records
        setTimeout(() => {
            if(this.videoList.length){
                     this.videoList.forEach((item,index)=>{
                        this.init(item,index)
                },1000)
            }else{
               this.dom.length=0
            }
       })
    },

    init (data,index) {
            this.dom[index]= new Player({
            el: this.$refs['video'+index][0],
            url: data.splj+'/'+data.spbh,
            videoInit: true,
            poster:data.spsltlj+'/'+data.spslt,  //å°é¢å›¾
            // cssFullscreen: true,
            lang: 'zh-cn',
            controls: false,
            playbackRate: [0.5, 0.75, 1, 1.5, 2],
            whitelist: [
            ''
            ],
            ignores: ['play'],
            fluid: false,
            // download: true,
            width: '100%',
            height: '200px'
        })
    },
    startPlay(data,index){
        this.$refs['img'+index][0].style.display="none"
        this.$refs['video'+index][0].style.display="block"
        this.$nextTick(()=>{
            this.dom[index].play()
        })
    },

    move(data,index){
        this.$refs['img'+index][0].style.display="block"
        setTimeout(() => {
            this.dom[index].pause()    
        }, 0);
        this.$refs['video'+index][0].style.display="none"
    },

 
 }
}
</script>
 
<style scoped lang = "less">
    .card{
      width: 18%;
      margin: 0 20px 20px 0;
      float: left;
    }
     .title{
         width: 100%;
         color: #000;
         height:40px;
         line-height: 40px;
         background-color: #ffffff;
         font-weight: 600;
         padding-left: 10px;
     }
</style>
```
## ğŸ¯ä¸¤ä¸ªå°å‘

### ğŸ«€ æ•°æ®è¿˜æ²¡åŠ è½½å®Œå°±åˆå§‹åŒ–å®ä¾‹çš„é—®é¢˜

è¿™è¾¹ä½¿ç”¨å®šæ—¶å™¨å»¶æ—¶æ‰§è¡Œï¼Œå¦‚æœç›´æ¥å¾ªç¯ï¼Œè¥¿ç“œæ’­æ”¾å™¨æ’­æ”¾æ—¶ä¼šæŠ¥é”™ï¼Œå¤§ä½“ä¸Šå°±æ˜¯å®ä¾‹æ²¡åˆå§‹åŒ–å®Œæˆã€‚åŒç†ï¼Œæ’­æ”¾çš„äº‹ä»¶ä¸­ä¹Ÿè¦ç­‰domåŠ è½½å®Œæˆåè°ƒç”¨playæ–¹æ³•æ’­æ”¾ã€‚

```js
   async setBaseList(){
        const res =await loadVideoList(this.form)
        this.videoList=res.data.records
        setTimeout(() => {
            if(this.videoList.length){
                 this.videoList.forEach((item,index)=>{
                      this.init(item,index)   //åˆå§‹åŒ–è§†é¢‘å®ä¾‹
                 },1000)
            }else{
                 this.dom.length=0
            ï½
       })
    },
```
### ğŸ«€ mouseenterå’Œmouseleave

ä½¿ç”¨v-forå¾ªç¯çš„æ—¶å€™ï¼Œmouseenterå’Œmouseleaveè¦åŠ åœ¨çˆ¶å…ƒç´ èº«ä¸Šã€‚

```js
 <div  class="card"  v-for="(item,index) in videoList" :key="index"   >
     <div style="width:100%;height:200px" 
        @mouseenter="startPlay(item,index)"
        @mouseleave="move(item,index)">
        <div                     
            :ref="`img${index}`"
            style="width:100%;height:200px;background-size: cover;" 
            :style="{'background-image':`url(${item.spsltlj+'/'+item.spslt}) `}">
        </div>
        <div  style="display:none;overflow:hidden"   :ref="`video${index}`">
        </div>
   </div>
    <div class="title">
        {{item.spmc}}
    </div>
</div>
```



## ğŸ¯æ€»ç»“
ä»¥ä¸Šæ˜¯è¥¿ç“œè§†é¢‘ä¸€ä¸ªç®€å•çš„demoä½¿ç”¨ä»‹ç»ï¼Œæ›´å¤šå¼ºå¤§çš„åŠŸèƒ½å¯ä»¥å»[å®˜ç½‘](http://v2.h5player.bytedance.com/)ä½“éªŒï¼Œæ¯”å¦‚å¼¹å¹•ï¼Œç”»ä¸­ç”»ä¸€äº›ç®€å•çš„é…ç½®ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™æ¬¾å¼€æºæ’ä»¶ä¸ä»…å¯ä»¥æ’­æ”¾è§†é¢‘ï¼Œè¿˜å¯ä»¥è¿›è¡Œ**ç›´æ’­**ï¼Œä¸æ­¢å¯ä»¥ç”¨åœ¨PCç«¯ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨ç§»åŠ¨ç«¯ã€‚


## ğŸ¯å¾€æœŸæ–‡ç« 
[ğŸ‰ç”¨Echartså†™ä¸€ä¸ªä½ä»¿ç”˜ç‰¹å›¾ï¼ˆå…·ä½“åˆ°ç§’)](https://juejin.cn/post/7020213150473535524#heading-18)

[æ‰‹å†™ä¸€ä¸ªç²¾ç¡®åˆ°ç§’çš„ä½ä»¿ç”˜ç‰¹å›¾](https://juejin.cn/post/7017643739849965575 "https://juejin.cn/post/7017643739849965575")

[Teleportï¼ŒVue3.0æ–°ç‰¹æ€§é‡Œçš„"ä»»æ„é—¨](https://juejin.cn/post/7016866669968490532 "https://juejin.cn/post/7016866669968490532")

[ç§»åŠ¨ç«¯Pickerç»„ä»¶æ»šåŠ¨ç©¿é€é—®é¢˜è¸©å‘](https://juejin.cn/post/7013600126715461640 "https://juejin.cn/post/7013600126715461640")

[Ant Design of Vueæ²¡æœ‰è¡¨æ ¼åˆè®¡è¡Œapiï¼Œæ¢ç§æ€è·¯](https://juejin.cn/post/7012784170128637966 "https://juejin.cn/post/7012784170128637966")

